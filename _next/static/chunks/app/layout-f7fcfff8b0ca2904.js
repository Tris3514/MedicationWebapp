(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{216:(e,r,t)=>{"use strict";function a(e){return"".concat("user_data_").concat(e)}function s(e){let r=a(e),t=localStorage.getItem(r);if(!t)return l();try{return JSON.parse(t)}catch(e){return console.error("Error parsing user data:",e),l()}}function o(e,r){let t=a(e);try{localStorage.setItem(t,JSON.stringify(r))}catch(e){console.error("Error saving user data:",e)}}function l(){return{flightCount:0,trackedFlightIds:[],weatherLocations:[],savedBusinesses:[],blacklistedBusinesses:[],medications:[],lastCheckDate:null,networkSpeedTest:null,theme:null}}function i(e){let r=l(),t=localStorage.getItem("totalFlightsTracked");t&&(r.flightCount=parseInt(t,10)||0,localStorage.removeItem("totalFlightsTracked"));let a=localStorage.getItem("trackedFlightIds");if(a)try{r.trackedFlightIds=JSON.parse(a),localStorage.removeItem("trackedFlightIds")}catch(e){console.error("Error parsing tracked flight IDs:",e)}let s=localStorage.getItem("weather-tracker-data");if(s)try{r.weatherLocations=JSON.parse(s).locations||[],localStorage.removeItem("weather-tracker-data")}catch(e){console.error("Error parsing weather data:",e)}let i=localStorage.getItem("saved-businesses");if(i)try{r.savedBusinesses=JSON.parse(i),localStorage.removeItem("saved-businesses")}catch(e){console.error("Error parsing saved businesses:",e)}let n=localStorage.getItem("blacklisted-businesses");if(n)try{r.blacklistedBusinesses=JSON.parse(n),localStorage.removeItem("blacklisted-businesses")}catch(e){console.error("Error parsing blacklisted businesses:",e)}let c=localStorage.getItem("medication-tracker-data");if(c)try{r.medications=JSON.parse(c)||[],localStorage.removeItem("medication-tracker-data")}catch(e){console.error("Error parsing medication data:",e)}let d=localStorage.getItem("last-check-date");d&&(r.lastCheckDate=d,localStorage.removeItem("last-check-date"));let u=localStorage.getItem("network-speed-test");if(u)try{r.networkSpeedTest=JSON.parse(u),localStorage.removeItem("network-speed-test")}catch(e){console.error("Error parsing network speed data:",e)}return o(e,r),r}t.d(r,{Ts:()=>o,gL:()=>s,oN:()=>i})},3479:(e,r,t)=>{"use strict";t.d(r,{D:()=>l,ThemeProvider:()=>i});var a=t(5155),s=t(2115);let o=(0,s.createContext)(void 0);function l(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}function i(e){let{children:r,defaultTheme:t="dark"}=e,[l,i]=(0,s.useState)(t);return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&("dark"===e||"light"===e)&&i(e)},[]),(0,s.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("light","dark"),e.classList.add(l),localStorage.setItem("theme",l)},[l]),(0,a.jsx)(o.Provider,{value:{theme:l,setTheme:i,toggleTheme:()=>{i("dark"===l?"light":"dark")}},children:r})}},3673:()=>{},5380:(e,r,t)=>{"use strict";t.d(r,{A:()=>n,AuthProvider:()=>i});var a=t(5155),s=t(2115),o=t(216);let l=(0,s.createContext)(void 0);function i(e){let{children:r}=e,[t,i]=(0,s.useState)({user:null,isAuthenticated:!1,isLoading:!0,error:null});(0,s.useEffect)(()=>{try{let e=localStorage.getItem("user_data");if(e){let r=JSON.parse(e);i({user:r,isAuthenticated:!0,isLoading:!1,error:null})}else i({user:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("user_data"),i({user:null,isAuthenticated:!1,isLoading:!1,error:"Failed to load user data"})}},[]);let n=async e=>{i(e=>({...e,isLoading:!0,error:null}));try{let r=JSON.parse(localStorage.getItem("users")||"[]"),t=r.find(r=>r.email===e.email&&r.password===e.password);if(!t)return i(e=>({...e,isLoading:!1,error:"Invalid email or password"})),{success:!1,error:"Invalid email or password"};{let e={...t,lastLoginAt:new Date().toISOString()},a=r.map(r=>r.email===t.email?e:r);return localStorage.setItem("users",JSON.stringify(a)),localStorage.setItem("user_data",JSON.stringify(e)),i({user:e,isAuthenticated:!0,isLoading:!1,error:null}),(0,o.oN)(e.id),{success:!0,user:e}}}catch(r){let e="Login failed. Please try again.";return i(r=>({...r,isLoading:!1,error:e})),{success:!1,error:e}}},c=async e=>{i(e=>({...e,isLoading:!0,error:null}));try{let r=JSON.parse(localStorage.getItem("users")||"[]");if(r.find(r=>r.email===e.email))return i(e=>({...e,isLoading:!1,error:"User with this email already exists"})),{success:!1,error:"User with this email already exists"};let t={id:Date.now().toString(),name:e.name,email:e.email,password:e.password,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString()},a=[...r,t];return localStorage.setItem("users",JSON.stringify(a)),localStorage.setItem("user_data",JSON.stringify(t)),i({user:t,isAuthenticated:!0,isLoading:!1,error:null}),(0,o.oN)(t.id),{success:!0,user:t}}catch(r){let e="Sign up failed. Please try again.";return i(r=>({...r,isLoading:!1,error:e})),{success:!1,error:e}}},d={...t,login:n,signUp:c,logout:()=>{localStorage.removeItem("user_data"),i({user:null,isAuthenticated:!1,isLoading:!1,error:null})},clearError:()=>{i(e=>({...e,error:null}))},loadUserData:()=>{var e;(null==(e=t.user)?void 0:e.id)&&(0,o.oN)(t.user.id)},saveCurrentUserData:()=>{var e;null==(e=t.user)||e.id}};return(0,a.jsx)(l.Provider,{value:d,children:r})}function n(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6064:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,3673,23)),Promise.resolve().then(t.bind(t,3479)),Promise.resolve().then(t.bind(t,5380))}},e=>{e.O(0,[978,441,255,358],()=>e(e.s=6064)),_N_E=e.O()}]);